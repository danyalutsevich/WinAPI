Потоки (threads)


Процесс (в терминах системного програмирования) - запуск и работа приложения
(термин означающий однозадачную систему между которыми переключается многозадачная ОС)


Систены потоки - части кода выполняющиеся параллельно (асинхронно) 
Идея многопоточности возникла с достижением пердела физического ускорения работы пк :частота(длина волны меньше мат.платы),
нагрев, фактор размера

Традиционно поток стартует на функции (процедуре)
Окончанее функции (return) завершает поток


Схема запуска -> WM_COMMAND ->StartThread()->
CreateThread() -> End;
	  |
  ThreadProc -> MessageBoxW ->End;

  Синхронизация 
  пример :
  activeThreads=2;

  Поток 1                  |   Поток 2
  activeThreads--; //1     |   activeThreads--;
  if(activeThreads==0){    |   if(activeThreads==0){ 
  ...                          ...
  сработает т.к.
  другой поток уменьшил 
  до 0
  }					           }

  ...
  }

  Атомарность операции - эффект транзакции - "все или ничего"
  выполнение операци присваивания (вычисение правой части перенос в левую часть) как неразнывногопроцесса
  
  x = x + 1
а) извлекается значение x (переносится из памяти в проц.)
б) добавляется 1 (x+1 еще находится в проц.)
в) из процессора данные переносятся в память "х"

проблема между а и в может "вклиниться" другой поток
Атомарность - неделимость, неразрывность а-б-в

Решения: 
сигнальные обьекты + состояние ожидания

Схема 
создаем сигнальный обьект СО(например мьютекс)
транзакция 
переводим СО в режим заблокирован (ЕСЛИ УЖЕ ЗАБЛОКИРОВАН ТО ОЖИДАЕМ ОСВОБОЖДЕНИЯ(РАЗБЛОКИРОВКИ))
выполняем операции
разблокируем обьект
конец транзакции









